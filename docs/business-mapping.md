# Business Mapping Layer
## Subjective Agent Architecture — 事業接続モデル

> **関連ドキュメント**: [`whitepaper.md`](./whitepaper.md)  
> 本ドキュメントはWhitepaperが定義した「主観モデル（Trait / State / Meta）」を、チャーン改善・LTV向上というKPIへ接続するための翻訳レイヤーである。

---

## 1. 本ドキュメントの目的

Whitepaperは「主観モデルの構造的正当性」と「エージェント最適化社会における競争優位」を示した。

本ドキュメントはその接続先を定義する：

> **顧客の主観（Trait / State / Meta）を、チャーン率・LTVというKPIの分解軸にする。**

---

## 2. Whitepaperが定義した「主観」の復習

Whitepaperは主観を三層で定義している。この定義がBusiness Mappingの全ての出発点である。

| 層 | 定義 | 更新頻度 | 例 |
|---|---|---|---|
| **Trait**（長期価値観） | 価格感度・ブランド志向・健康志向・安定志向など | 月〜年単位 | 「健康志向が高い」「価格より利便性を重視」 |
| **State**（短期状態） | 疲労・予算変動・イベント・季節性・同伴者など | 日〜時間単位 | 「今週は忙しい」「今月は予算が厳しい」 |
| **Meta**（修正履歴） | 「それは違う」「前回の方が良い」といったフィードバック | イベント駆動 | 「この提案はズレている」という明示的な訂正 |

**重要な前提**：whitepaperはこの三層を「行動履歴の集計」ではなく、「顧客の内側にある主観的状態」として定義している。RFMや来店回数は行動の結果であり、主観ではない。

---

## 3. なぜ「主観」がチャーン対策の軸になるのか

### 3.1 従来のチャーン対策の限界

従来手法が使う変数：年齢・来店回数・購買金額・RFM。

これらは**行動の結果**を記録したものである。「なぜ来なくなったか」を説明しない。

### 3.2 主観ベースのアプローチ

Whitepaperの主観モデルを使うと、チャーンの手前にある「状態」が見える。

```
【従来のアプローチ】
  行動履歴（来店が減った） → チャーンと判定 → 一律施策

【主観ベースのアプローチ】
  State変化（「今月は予算が厳しい」「疲れていて来る余裕がない」）
      ↓
  Trait照合（「価格感度が高い人か？」「利便性重視の人か？」）
      ↓
  Meta参照（「過去に似た状態でどんな施策が刺さったか？」）
      ↓
  個別施策（Traitに合った価値提案）
```

Whitepaperが示すとおり、ウォルマートのエージェント利用顧客が非利用者比で注文額+35%という数字は、**主観モデルの精度がLTVに直結する**ことを示す。同じことがチャーン防止にも成立する。

---

## 4. 主観三層とKPIの接続設計

### 4.1 State → チャーン予兆の検出

Stateは「日〜時間単位」で更新される短期的な主観状態である。チャーンの直前には、Stateに変化が起きている可能性が高い。

```
State変化の例：
  「今月は予算が厳しい」  →  価格感度の一時的な上昇
  「子どもの行事が続いている」 →  来店余裕の消失
  「最近疲れている」  →  選択コストを下げたいニーズ

これらは「来店回数の低下」より早い段階で検出できる。
```

**KPI接続**：Stateの変化速度・方向性を監視することで、チャーン予兆スコアを構成する。

### 4.2 Trait → 施策の個別最適化

Traitは「月〜年単位」で安定する長期的な価値観である。同じ「予算が厳しい」というStateであっても、Traitが異なれば有効な施策は変わる。

```
State = 「今月は予算が厳しい」の場合：

  Trait = 「価格感度高・ブランド志向低」
      → 割引・ポイント訴求が有効

  Trait = 「価格感度低・利便性重視」
      → 割引より「手間が減る」提案が有効

  Trait = 「健康志向高・価格感度中」
      → 価格よりも「身体に良い」文脈の訴求が有効
```

**KPI接続**：Trait別に施策の効果を分離測定することで、一律施策との比較でROIを算出できる。

### 4.3 Meta → 施策精度の継続改善

Metaは「それは違う」というフィードバックの蓄積であり、Whitepaperが「推論モデルの校正に用いられる」と定義している。

事業KPIとの接続では、Metaは**施策外れの記録**として機能する。

```
顧客が施策に反応しなかった、または離れた場合：
  → 「この顧客にはこの施策が刺さらなかった」というMetaとして蓄積
  → 次回の施策設計に反映
  → 蓄積が増えるほど、施策の当たり率が上がる
```

**KPI接続**：Metaの蓄積速度を「主観推論エンジンの学習速度」として重要KPIに設定する（Whitepaperのフェーズ2定義に準拠）。

---

## 5. チャーン改善モデル

### 5.1 基本式

```
売上 = 顧客数 × LTV
LTV = 平均単価 × 来店回数 × 継続期間
```

主観モデルを介した改善の流れ：

```
State検出（予兆）
    ↓
Trait照合（施策選択）
    ↓
Meta参照（過去の反応履歴）
    ↓
個別施策の実行
    ↓
チャーン率の低下 → Δ継続期間の増加 → LTV向上
```

### 5.2 主観三層別の改善インパクト

| 層 | 検出できること | 事業インパクト |
|---|---|---|
| State | チャーン予兆（行動変化より早い） | 早期介入によるチャーン防止 |
| Trait | 施策の個別最適化 | 施策コスト削減・反応率向上 |
| Meta | 施策精度の継続改善 | 学習効果による参入障壁の形成 |

---

## 6. 実装レイヤー（Phase設計）

WhitepaperのフェーズD→C→A進行に対応させ、KPI接続の観点で再定義する。

### Phase 0：主観モデルの構造証明
- 顧客の自然言語・問い合わせ・行動ログからState/Trait/Metaを抽出できるか検証
- JSON出力の安定性確認（集計基盤の前提条件）
- dry_run設計：KPIへの接続前に、分類結果の妥当性を人手で確認

### Phase 1：Stateによるチャーン予兆検出
- State変化の監視パイプライン構築
- 「State変化 → チャーン」の相関を過去データで検証
- 予兆スコアの精度を測定

### Phase 2：Trait × State の施策最適化（KPI接続）
- Trait別・State別の施策ABテスト
- 測定指標：再来店率・30日継続率・施策反応率
- Metaの蓄積速度をKPIとして監視開始

### Phase 3：ROI算出と学習効果の確認
- 主観ベース施策 vs 一律施策のROI比較
- Metaの蓄積による施策精度向上を定量確認
- LTV変化の算出

---

## 7. KPI接続の具体設計

### 7.1 データ要件

| データ種別 | 主観モデルとの接続 |
|---|---|
| 自然言語ログ（問い合わせ・会話） | State/Trait抽出の入力 |
| 行動ログ（来店・購買） | State変化の補完情報 |
| 施策履歴 | Meta蓄積の入力 |
| 顧客フィードバック | Meta蓄積の主要入力 |
| 解約フラグ | チャーン率の計算 |

### 7.2 主観 → KPIのパイプライン

```
顧客の発話・行動ログ
    ↓
Trait / State / Meta の推定（主観推論エンジン）
    ↓
顧客IDへの付与
    ↓
Trait別 × State別のセグメント集計
    ↓
チャーン率・LTVのKPIダッシュボード
```

### 7.3 ダッシュボードのイメージ

従来のRFMセグメントではなく、**主観三層の組み合わせ**をKPI分解軸にする。

| Trait | State | 顧客数 | 予兆スコア | 施策 | 再来店率 |
|---|---|---|---|---|---|
| 価格感度高 | 予算逼迫中 | 340 | 高 | 割引訴求 | 測定中 |
| 利便性重視 | 多忙状態 | 210 | 中 | 時短提案 | 測定中 |
| 健康志向高 | 安定 | 580 | 低 | 定期訴求 | 測定中 |

---

## 8. ROI試算テンプレ

### 基本式

```
対象セグメント顧客数 × チャーン改善率 × 平均単価 × 年間来店回数 = Δ売上
```

### 試算例

- 対象：Trait「利便性重視」× State「多忙状態」の顧客 210人
- 施策：時短・手間削減の文脈での訴求
- 仮定チャーン改善率：+6%
- 客単価：5,000円 / 年4回

```
210 × 0.06 × 5,000 × 4 = 252,000円
```

一律施策との差分を測定することで、主観モデルを使うことの追加的ROIを算出できる。

---

## 9. 重要な前提

### 9.1 主観モデルは「完璧な分類」を必要としない

Whitepaperが示すとおり、重要なのは**Stateが安定して再現されること**である。誤分類があっても、Metaが蓄積されることで精度は継続的に改善する。

この設計思想はKPI測定にも継承される：初期の精度が低くても、Metaの蓄積速度を監視しながら段階的に改善できる。

### 9.2 Metaの蓄積こそが参入障壁になる

Whitepaperが「学習効果による参入障壁」と定義したとおり、Metaの蓄積は時間とともに模倣困難な競争優位になる。これはチャーン改善施策においても同様で、「何が刺さらなかったか」の記録が蓄積されるほど、施策の当たり率は向上する。

---

## 10. WhitepaperとBusiness Mappingの役割分担

| ドキュメント | 担う問い |
|---|---|
| `whitepaper.md` | 「主観とは何か」「なぜ主観が競争優位になるのか」 |
| `business-mapping.md` | 「その主観をどうKPIに接続するか」「どうROIを算出するか」 |

Whitepaperが示した「主観モデルの精度がLTVに直結する」という命題を、チャーン率・再来店率・施策ROIという測定可能な指標へ翻訳することが、本ドキュメントの役割である。

Trait / State / Meta という三層構造が、そのまま**KPIの分解軸・施策の個別化軸・継続改善の学習軸**になる。

---

*本ドキュメントは [`whitepaper.md`](./whitepaper.md) のTrait / State / Meta定義に依存している。主観モデルの定義が変更された場合、セクション2・4・7のKPI接続設計も合わせて更新すること。*
